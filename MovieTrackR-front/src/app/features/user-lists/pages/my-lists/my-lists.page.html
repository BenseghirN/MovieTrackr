<div class="my-lists-page">
  <div class="page-header">
    <div class="header-content">
      <h1>Mes Listes</h1>
      <p class="subtitle">Organisez vos films en listes personnalisées</p>
    </div>
    
    @if (isAuthenticated()) {
      <p-button
        label="Créer une liste"
        icon="pi pi-plus"
        (onClick)="onCreateList()"
        styleClass="create-list-btn"
      />
    }
  </div>

  @if (loading()) {
    <div class="loading-container">
      <p-progressSpinner />
    </div>
  }

  @if (error()) {
    <div class="error-message">
      <i class="pi pi-exclamation-triangle"></i>
      <p>{{ error() }}</p>
      <p-button
        label="Réessayer"
        [outlined]="true"
        (onClick)="onLoadLists()"
      />
    </div>
  }

  @if (!loading() && !error() && isAuthenticated()) {
    @if (hasLists() ) {
      <div class="lists-grid">
        @for (list of lists(); track list.id) {
          <app-user-list-card 
            [list]="list" 
            (deletedList)="onDeletedList($event)" 
            (editedList)="onEditedList()"
            (click)="onViewList(list)"
          />
        }
      </div>
    } @else {
      <div class="empty-state">
        <i class="pi pi-inbox"></i>
        <h2>Aucune liste pour le moment</h2>
        <p>Créez votre première liste pour organiser vos films préférés</p>
        
        @if (isAuthenticated()) {
          <p-button
            label="Créer ma première liste"
            icon="pi pi-plus"
            (onClick)="onCreateList()"
            styleClass="create-first-list-btn"
          />
        } @else {
          <p-button
            label="Se connecter"
            icon="pi pi-sign-in"
            (onClick)="onLogin()"
          />
        }
      </div>
    }
  }
</div>