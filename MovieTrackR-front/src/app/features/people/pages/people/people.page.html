<div class="people-page">
  <h1>üîç Recherche de personnes</h1>
  <div class="search-panel">
    <div class="search-bar">
      <input
        type="text"
        pInputText
        placeholder="Rechercher une personne..."
        (input)="onQueryChange($event)"
        (keyup)="onSearchKeyUp($event)"
        class="search-input"
      />
      <p-button
        label="Rechercher"
        icon="pi pi-search"
        (click)="currentPage.set(1); search()"
        [loading]="loading()"
      ></p-button>
    </div>
  </div>

  @if (loading()) {
    <div class="loading-container">
      <p-progressSpinner></p-progressSpinner>
    </div>
  }

  @if (error()) {
    <div class="error-message">
      <i class="pi pi-exclamation-triangle"></i>
      {{ error() }}
    </div>
  }

  @if (showNoResults()) {
    <div class="no-results">
      <i class="pi pi-info-circle"></i>
      Aucune personne trouv√©e pour "{{ searchQuery() }}"
    </div>
  }

  @if (hasResults()) {
    <div class="results-info">
      <span>{{ totalResults() }} r√©sultat(s) trouv√©(s)</span>
    </div>

    <div class="people-grid">
      @for (person of people(); track person.tmdbId) {
        <app-person-card
          [person]="person"
          (personClick)="onPersonClick(person)"
        />
      }
    </div>

    <p-paginator
      [rows]="pageSize()"
      [totalRecords]="totalResults()"
      [first]="(currentPage() - 1) * pageSize()"
      [rowsPerPageOptions]="[10, 20, 50]"
      (onPageChange)="onPageChange($event)"
    ></p-paginator>
  }
</div>